{% extends 'base.html' %}
{% load static %}

{% block title %}Галерея - Saffron{% endblock %}

{% block content %}
<section id="page-title" class="page-title bg-overlay bg-parallax bg-overlay-gradient">
    <div class="bg-section">
        <img src="{% static 'img/gall_main.jpg' %}" alt="Background" />
    </div>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12">
                <div class="title title-4 text-center">
                    <div class="title--content">
                        <div class="title--subtitle">Memories</div>
                        <div class="title--heading">
                            <h1>Our Gallery</h1>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                    <ol class="breadcrumb">
                        <li><a href="{% url 'home' %}">Home</a>
                        </li>
                        <li class="active">Gallery</li>
                    </ol>
                    <div class="divider--shape-1down"></div>
                </div>
                <!-- .title end -->
            </div>
            <!-- .col-md-12 end -->
        </div>
        <!-- .row end -->
    </div>
    <!-- .container end -->
</section>

<section id="portfolio" class="portfolio portfolio-gallery portfolio-5col pt-80 bg-white">
    <div class="container-fluid pr-0 pl-0">
        <div id="portfolio-all" class="row-no-padding">
            {% for image in images %}
            <div class="col-xs-6 col-sm-4 col-md-5ths portfolio-item filter-clients{% if forloop.counter0 >= 15 %} additional-item{% endif %}">
                <div class="portfolio--img">
                    <img src="{{ image.image.url }}" alt="Dish Image">
                    <div class="portfolio--hover">
                        <div class="portfolio--action" style="background-color: transparent">
                            <div class="pos-vertical-center">
                                <div class="portfolio--zoom">
                                    <a class="img-gallery-item" href="{{ image.full_image.url }}" title="Dish Image"></a>
                                </div>
                            </div>
                        </div>
                        <!-- .Portfolio-action end -->
                    </div>
                    <!-- .Portfolio-hover end -->
                </div>
                <!-- .Portfolio-img end -->
            </div>
            {% endfor %}
            <!-- . portfolio-item end -->
        </div>
        <!-- .row end -->
        <!-- .row end -->
        {% if images|length > 15 %}
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 text--center mt-50">
                <button class="btn btn--secondary" onclick="togglePhotos()" id="toggleBtn">
                    <span></span>See More
                </button>
            </div>
        </div>
        {% endif %}
    </div>
</section>

<script>
let showingAll = false;

function togglePhotos() {
    const additionalItems = document.querySelectorAll('.additional-item');
    const toggleBtn = document.getElementById('toggleBtn');

    if (!showingAll) {
        // Показать все
        additionalItems.forEach(item => item.style.display = '');
        toggleBtn.innerHTML = '<span></span>See Less';
        showingAll = true;
    } else {
        // Скрыть дополнительные
        additionalItems.forEach(item => item.style.display = 'none');
        toggleBtn.innerHTML = '<span></span>See More';
        showingAll = false;
    }
}

// Инициализация - скрыть дополнительные фото при загрузке
document.addEventListener('DOMContentLoaded', function() {
    const additionalItems = document.querySelectorAll('.additional-item');
    additionalItems.forEach(item => item.style.display = 'none');
});
</script>
{% endblock %}